(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),o=n.n(c),i=n(21),l=n(25),s=n(23),u=n(22),p=n(24),d=n(66),m=n(366),h=n(363),f=n(365),g=n(364),b=n(26),E=n(120),y=n(121),O=n(29),j=n(30),k=n.n(j),x={fetchLikes:function(){return function(e){k.a.get("/likes").then(function(e){return e.data}).then(function(t){e({type:"FETCH_LIKES_RESULT",data:t})}).catch(function(e){console.log("ERROR: ",e)})}},toggleLike:function(e){return function(t){k.a.post("/likes",{id:e},{headers:{"Content-Type":"application/json"}}).then(function(n){t({type:"TOGGLE_LIKE",id:e})}).catch(function(e){console.log("ERROR: ",e)})}}},C={likes:[]},v=function(e,t){var n=t;switch(n.type){case"FETCH_LIKES_RESULT":return Object.assign({},{likes:n.data});case"TOGGLE_LIKE":var a=e.likes,r=a.indexOf(n.id);return-1===r?a.push(n.id):a.splice(r,1),Object.assign({},Object(O.a)({},e,{likes:a}));default:}return e||C},w="https://search.artsmia.org/",R={fetchArtworkById:function(e){return function(t){t({type:"FETCH_ARTWORK"}),k.a.get("".concat(w,"id/").concat(e)).then(function(e){return e.data}).then(function(e){var n=[];n.push(e),t({type:"FETCH_ARTWORK_RESULT",data:n,updateDashboard:!1})}).catch(function(e){console.log("ERROR: ",e)})}},fetchRandom:function(e){return function(t){t({type:"FETCH_ARTWORK"}),k.a.get("".concat(w,"random/art?size=").concat(e,"&q=restricted:0+image:valid")).then(function(e){return e.data.map(function(e){return e._source})}).then(function(e){t({type:"FETCH_ARTWORK_RESULT",data:e,updateDashboard:!0})}).catch(function(e){console.log("ERROR: ",e)})}},search:function(e){return function(t){k.a.get("".concat(w,'"').concat(e,'"')).then(function(e){return e.data.hits.hits.map(function(e){return e._source})}).then(function(e){t({type:"FETCH_ARTWORK_RESULT",data:e,updateDashboard:!1}),t({type:"SEARCH_ARTWORK_RESULT",data:e.map(function(e){return e.id})})}).catch(function(e){console.log("ERROR: ",e)})}},clearSearch:function(){return function(e){e({type:"SEARCH_FOCUS"})}}},S={records:[],loading:!1,dashboardList:[],searchResults:[]},T=function(e,t){var n=t;switch(n.type){case"FETCH_ARTWORK":return Object.assign({},Object(O.a)({},e,{loading:!0}));case"FETCH_ARTWORK_RESULT":var a=e.records.concat(n.data);return Object.assign({},Object(O.a)({},e,{loading:!1,records:a,dashboardList:n.updateDashboard?n.data.map(function(e){return e.id}):e.dashboardList}));case"SEARCH_ARTWORK_RESULT":e.searchResults.concat(n.data);return Object.assign(Object(O.a)({},e,{searchResults:n.data}));case"SEARCH_FOCUS":return Object.assign(Object(O.a)({},e,{searchResults:[]}));default:}return e||S},A=Object.assign({},x,R),L=function(){var e=localStorage.getItem("pollywog:state"),t=e?JSON.parse(e):{User:C,Artwork:S},n=Object(b.e)(Object(b.c)(Object.assign({},{User:v,Artwork:T},{routing:E.routerReducer})),t,Object(b.d)(Object(b.a)(y.a)));return n.subscribe(function(){var e=n.getState();localStorage.setItem("pollywog:state",JSON.stringify(e))}),n},B=n(46),I=n.n(B),F=n(17),_=Object(F.createMuiTheme)({palette:{primary:{light:"#74747e",main:"#33333e",dark:"rgba(0, 0, 0, 0.26)",contrastText:"rgba(255, 255, 255, 1)"},secondary:{light:"#448aff",main:"#0d47a1",dark:"#2979ff",contrastText:"#9e9e9e"}},typography:{useNextVariants:!0,h1:{color:"rgba(255, 255, 255, 1)"},h2:{color:"rgba(255, 255, 255, 1)"},h3:{fontSize:"22pt",color:"rgba(255, 255, 255, 1)"},h4:{fontSize:"12pt",textAlign:"center"},h5:{fontSize:"10pt",textAlign:"center"}}}),D=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,null),r.a.createElement(F.MuiThemeProvider,{theme:_},n.props.children))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}}]),t}(r.a.Component),H=n(20),N=n(3),U=n(64),K=function(e){return Object(F.createStyles)({root:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"calc(100vh - ".concat(20*e.spacing.unit,"px)"),color:e.palette.primary.contrastText,margin:20*e.spacing.unit},searchPlaceholder:{position:"relative",borderRadius:e.shape.borderRadius,borderWidth:"1px",borderColor:e.palette.primary.contrastText,borderStyle:"solid",width:"80%",height:"75px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",cursor:"text"},fullscreen:{position:"fixed",overflow:"scroll",left:"0",top:"0",width:"100vw",height:"300vh",backgroundColor:Object(U.fade)(e.palette.primary.light,1),zIndex:0},fullscreenShow:{zIndex:10},searchContainer:{height:"100px"},divider:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",transition:"opacity 5s ease",justifySelf:"flex-end",marginTop:"auto"},searchIcon:{width:10*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center"},inputRoot:{color:"inherit",width:"100%",height:"100px"},inputInput:{paddingTop:e.spacing.unit,paddingRight:10*e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:e.spacing.unit,transition:e.transitions.create("width"),width:"100%",textAlign:"center",fontSize:"40pt",color:e.palette.primary.dark},resultImage:{position:"relative",overflow:"hidden",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},media:{maxHeight:"400px",cursor:"pointer"},closeFab:{position:"absolute",right:"20px",top:"20px"}})},W=n(48),z=n(28),M=n.n(z),G=n(123),J=n.n(G),P=n(124),q=n.n(P),V=n(122),Y=n.n(V),Q=n(7),X=n.n(Q),Z=Object(F.withStyles)(K)(function(e){return r.a.createElement(N.i,{cols:3,spacing:30,cellHeight:450},e.targets.map(function(t){var n=e.data[e.data.map(function(e){return e.id}).indexOf(t)];return r.a.createElement(N.j,{key:n.id,cols:1},r.a.createElement(N.b,{className:e.classes.resultImage},r.a.createElement(N.c,{onClick:e.handleClick,id:n.id},r.a.createElement(N.e,{component:"img",className:e.classes.media,image:"/img/".concat(n.id,".jpg"),title:n.title})),r.a.createElement(N.d,null,r.a.createElement(N.r,{gutterBottom:!0,variant:"h5",component:"h4"},n.title," by ",n.artist))))}))}),$=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).timer=void 0,n.onFocus=function(){n.props.clearSearch(),n.setState({searchFocus:!0})},n.onBlur=function(){n.setState({searchFocus:!1})},n.handleSearchInput=function(e){n.timer&&clearTimeout(n.timer),n.setState({search:e.currentTarget.value}),n.timer=setTimeout(function(){n.onSearch()},500)},n.onSearch=function(){n.props.search(n.state.search)},n.render=function(){var e=n.props.classes,t=n.state,a=t.searchFocus,c=t.search,o=n.props.Artwork,i=o.records,l=o.searchResults;return r.a.createElement("div",{className:e.root},r.a.createElement(M.a,{component:"h1",variant:"h1",align:"center"},"Minneapolis Institute of Art"),r.a.createElement(N.k,{in:a,timeout:400},r.a.createElement("div",{className:X()(e.fullscreen,Object(W.a)({},e.fullscreenShow,a))},r.a.createElement("div",{className:e.searchContainer},a?r.a.createElement(N.l,{placeholder:"Search",classes:{root:e.inputRoot,input:e.inputInput},onChange:n.handleSearchInput,value:c,autoFocus:!0}):r.a.createElement(r.a.Fragment,null)),a&&l.length>0?r.a.createElement(Z,{data:i,targets:l,handleClick:n.props.artClickHandler}):r.a.createElement(r.a.Fragment,null),r.a.createElement(N.g,{color:"default","aria-label":"close search",className:e.closeFab,onClick:n.onBlur},r.a.createElement(Y.a,null)))),r.a.createElement("div",{className:e.searchPlaceholder,onClick:n.onFocus},r.a.createElement(M.a,{component:"h3",variant:"h3",align:"center"},"Search and Explore..."),r.a.createElement("div",{className:e.searchIcon},r.a.createElement(J.a,null))),r.a.createElement("div",{className:e.divider,style:n.props.showButton?{opacity:1}:{opacity:0}},r.a.createElement(M.a,{component:"h3",variant:"h3",align:"center",gutterBottom:!0},"Need inspiration?"),r.a.createElement(N.g,{color:"secondary","aria-label":"explore",onClick:n.props.buttonClickHandler},r.a.createElement(q.a,null))))},n.timer=void 0,n.state={searchFocus:!1,search:""},n.onFocus=n.onFocus.bind(Object(H.a)(Object(H.a)(n))),n.onBlur=n.onBlur.bind(Object(H.a)(Object(H.a)(n))),n.handleSearchInput=n.handleSearchInput.bind(Object(H.a)(Object(H.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({searchFocus:!1})}}]),t}(r.a.Component),ee=Object(F.withStyles)(K)($),te=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.Artwork,c=this.props.Artwork.dashboardList.map(function(e){return a.records[a.records.map(function(e){return e.id}).indexOf(e)]});return r.a.createElement(N.i,{cols:3,spacing:30,cellHeight:400,className:n.gridList},c.map(function(t){return r.a.createElement(N.j,{key:t.id,cols:1,onClick:e.props.handleClick,id:t.id},r.a.createElement("img",{src:"/img/".concat(t.id,".jpg"),alt:t.title}))}))}}]),t}(r.a.Component),ne=Object(F.withStyles)(function(e){return Object(F.createStyles)({root:{color:e.palette.primary.contrastText},gridList:{marginLeft:10*e.spacing.unit,marginRights:10*e.spacing.unit},imageText:{display:"flex",flexDirection:"column",alignContent:"center"},imageContainer:{display:"flex",flexDirection:"column",alignContent:"center"}})})(te),ae=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).scrollRef=void 0,n.state={showButton:!0},n.scrollRef=a.createRef(),n.handleArtClick=n.handleArtClick.bind(Object(H.a)(Object(H.a)(n))),n.handleButtonClick=n.handleButtonClick.bind(Object(H.a)(Object(H.a)(n))),n.scrollListen=n.scrollListen.bind(Object(H.a)(Object(H.a)(n))),window.addEventListener("scroll",n.scrollListen),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchRandom(12)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollListen)}},{key:"scrollListen",value:function(){window.scrollY<550&&!this.state.showButton&&this.setState({showButton:!0})}},{key:"handleArtClick",value:function(e){this.props.history.push("/detail/".concat(e.currentTarget.id))}},{key:"handleButtonClick",value:function(){window.scrollTo({top:this.scrollRef.current.offsetTop,behavior:"smooth"}),this.setState({showButton:!1})}},{key:"render",value:function(){return a.createElement("div",{className:this.props.classes.root},a.createElement(ee,Object.assign({},this.props,{buttonClickHandler:this.handleButtonClick,artClickHandler:this.handleArtClick,showButton:this.state.showButton})),a.createElement("div",{ref:this.scrollRef}),this.props.Artwork.loading||this.props.Artwork.records.length<10?a.createElement(N.f,null):a.createElement(ne,Object.assign({},this.props,{handleClick:this.handleArtClick})))}}]),t}(a.Component),re=Object(F.withStyles)(function(e){return Object(F.createStyles)({root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}})})(ae),ce=n(125),oe=n.n(ce),ie=n(126),le=n.n(ie),se=n(127),ue=n.n(se),pe=function(e){return Object(F.createStyles)({root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.primary.main,minHeight:"100vh"},header:{display:"flex",flexDirection:"row",justifyContent:"flex-start"},container:{display:"flex",flexDirection:"row",justifyContent:"center",backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},button:{marginLeft:2*e.spacing.unit,marginTop:2*e.spacing.unit},appBar:{top:"auto",bottom:0},toolbar:{alignItems:"center",justifyContent:"space-between"},buttonContainer:{position:"absolute",width:"200px",display:"flex",flexDirection:"row",justifyContent:"space-between",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},likeButton:{backgroundColor:"#d31818",color:"white"}})},de=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).componentDidMount=function(){var e=n.props.location.pathname.split("detail/")[1],t=n.props.Artwork.records.map(function(e){return e.id}).indexOf(e||"undefined");e&&-1===t&&n.props.fetchArtworkById(e)},n.onBack=function(){n.props.history.goBack()},n.toggleLike=function(){var e=n.props.location.pathname.split("detail/")[1];n.props.toggleLike(e)},n.render=function(){var e=n.props.location.pathname.split("detail/")[1],t=n.props,r=t.classes,c=t.Artwork,o=t.User,i=c.records[c.records.map(function(e){return e.id}).indexOf(e)],l=!!i&&o.likes.indexOf(i.id)>-1;return i?a.createElement("div",{className:r.root},a.createElement(N.h,{container:!0,spacing:8,className:r.container},a.createElement(N.h,{item:!0,xs:12,sm:6,md:6,lg:6},a.createElement(N.p,null,a.createElement(N.e,{component:"img",image:"/img/".concat(i.id,".jpg"),title:i.title}))),a.createElement(N.h,{item:!0,xs:12,sm:3,md:3,lg:3},a.createElement(N.b,null,a.createElement(N.d,null,a.createElement(N.m,null,a.createElement(N.n,null,a.createElement(N.o,{primary:"Title",secondary:i.title})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Artist",secondary:i.artist})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Dated",secondary:i.dated})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Medium",secondary:i.medium})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Style",secondary:i.style})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Description",secondary:i.description})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Country of Origin",secondary:i.country})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Dimensions",secondary:i.dimension})),a.createElement(N.n,null,a.createElement(N.o,{primary:"Info"}),a.createElement(N.r,null,i.text))))))),a.createElement(N.a,{position:"fixed",color:"secondary",className:r.appBar},a.createElement(N.q,{className:r.toolbar},a.createElement("div",{className:r.buttonContainer},a.createElement(N.g,{color:"primary","aria-label":"Back",onClick:n.onBack},a.createElement(oe.a,null)),a.createElement(N.g,{color:"secondary","aria-label":"Like",className:r.likeButton,onClick:n.toggleLike},l?a.createElement(le.a,null):a.createElement(ue.a,null)))))):a.createElement(a.Fragment,null," ",a.createElement(N.f,null))},n}return Object(p.a)(t,e),t}(a.Component),me=Object(F.withStyles)(pe)(de),he=Object(f.a)(Object(d.b)(function(e){return e},function(e){return Object(b.b)(A,e)})(function(e){return r.a.createElement(D,e,r.a.createElement(m.a,null,r.a.createElement(h.a,{exact:!0,path:"/"},r.a.createElement(re,e)),r.a.createElement(h.a,{exact:!0,path:"/detail/:id"},r.a.createElement(me,e))))})),fe=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{store:L()},r.a.createElement(g.a,null,r.a.createElement(he,null)))}}]),t}(a.Component);o.a.render(r.a.createElement(fe,null),document.getElementById("root"))}},[[214,2,1]]]);
//# sourceMappingURL=main.d54176e4.chunk.js.map